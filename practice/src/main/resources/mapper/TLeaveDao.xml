<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hodo.practice.dao.TLeaveDao">

    <resultMap type="com.hodo.practice.entity.TLeave" id="TLeaveMap">
        <result property="id" column="id" jdbcType="INTEGER"/>
        <result property="leavetype" column="LeaveType" jdbcType="INTEGER"/>
        <result property="num" column="Num" jdbcType="INTEGER"/>
        <result property="name" column="Name" jdbcType="VARCHAR"/>
        <result property="reason" column="Reason" jdbcType="VARCHAR"/>
        <result property="leavetime" column="LeaveTime" jdbcType="TIMESTAMP"/>
        <result property="backtime" column="BackTime" jdbcType="TIMESTAMP"/>
        <result property="days" column="days" jdbcType="INTEGER"/>
        <result property="ammount" column="ammount" jdbcType="NUMERIC"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="TLeaveMap">
        select id,
               LeaveType,
               Num,
               Name,
               Reason,
               LeaveTime,
               BackTime,
               days,
               ammount
        from practice2.t_leave
        where id = #{id}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="TLeaveMap">
        select id,
               LeaveType,
               Num,
               Name,
               Reason,
               LeaveTime,
               BackTime,
               days,
               ammount
        from practice2.t_leave limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="TLeaveMap">
        select
        id, LeaveType, Num, Name, Reason, LeaveTime, BackTime, days, ammount
        from practice2.t_leave
        <where>
            <if test="id != null">
                and id = #{id}
            </if>
            <if test="leavetype != null">
                and LeaveType = #{leavetype}
            </if>
            <if test="num != null">
                and Num = #{num}
            </if>
            <if test="name != null and name != ''">
                and Name = #{name}
            </if>
            <if test="reason != null and reason != ''">
                and Reason = #{reason}
            </if>
            <if test="leavetime != null">
                and LeaveTime = #{leavetime}
            </if>
            <if test="backtime != null">
                and BackTime = #{backtime}
            </if>
            <if test="days != null">
                and days = #{days}
            </if>
            <if test="ammount != null">
                and ammount = #{ammount}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="id" useGeneratedKeys="true">
        insert into practice2.t_leave(LeaveType, Num, Name, Reason, LeaveTime, BackTime, days, ammount)
        values (#{leavetype}, #{num}, #{name}, #{reason}, #{leavetime}, #{backtime}, #{days}, #{ammount})
    </insert>

    <insert id="insertBatch" keyProperty="id" useGeneratedKeys="true">
        insert into practice2.t_leave(LeaveType, Num, Name, Reason, LeaveTime, BackTime, days, ammount)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.leavetype}, #{entity.num}, #{entity.name}, #{entity.reason}, #{entity.leavetime},
            #{entity.backtime}, #{entity.days}, #{entity.ammount})
        </foreach>
    </insert>

    <insert id="insertOrUpdateBatch" keyProperty="id" useGeneratedKeys="true">
        insert into practice2.t_leave(LeaveType, Num, Name, Reason, LeaveTime, BackTime, days, ammount)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.leavetype}, #{entity.num}, #{entity.name}, #{entity.reason}, #{entity.leavetime},
            #{entity.backtime}, #{entity.days}, #{entity.ammount})
        </foreach>
        on duplicate key update
        LeaveType = values(LeaveType) , Num = values(Num) , Name = values(Name) , Reason = values(Reason) , LeaveTime =
        values(LeaveTime) , BackTime = values(BackTime) , days = values(days) , ammount = values(ammount)
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update practice2.t_leave
        <set>
            <if test="leavetype != null">
                LeaveType = #{leavetype},
            </if>
            <if test="num != null">
                Num = #{num},
            </if>
            <if test="name != null and name != ''">
                Name = #{name},
            </if>
            <if test="reason != null and reason != ''">
                Reason = #{reason},
            </if>
            <if test="leavetime != null">
                LeaveTime = #{leavetime},
            </if>
            <if test="backtime != null">
                BackTime = #{backtime},
            </if>
            <if test="days != null">
                days = #{days},
            </if>
            <if test="ammount != null">
                ammount = #{ammount},
            </if>
        </set>
        where id = #{id}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete
        from practice2.t_leave
        where id = #{id}
    </delete>

</mapper>

